import{u,a as x,j as e}from"./index-yJ_BCFbf.js";import{a as f,b}from"./validations-aEEZX7Ii.js";import{a as h}from"./axiosInstance-PK0LAldn.js";import{t as $}from"./columnFields-w9fEJwDj.js";import{u as g}from"./Combination-x4OEQfnj.js";import{C as y}from"./CrudComponent-9lJTNnql.js";import{T as o}from"./TransactionCard-9_3JsE_u.js";import{D as C}from"./datetime-yb3bjE9z.js";import{u as N}from"./useCurrency-7FjUzzCR.js";import{g as j}from"./index-S5OpuviD.js";import{l as T}from"./Input-QDMO-0Kd.js";import"./constants-hUQexe52.js";import"./DropdownMenu-myGTgyfW.js";import"./DynamicForm-x40QvH4F.js";import"./Modal-9n6nT-q2.js";const V=()=>{var r,l,i,m;const d=u(x),s=N(),{data:t,refetch:n}=g({queryKey:["balance-info"],queryFn:async()=>h.get("/api/transaction/balance-info").then(a=>a.data),refetchOnWindowFocus:!1}),c=a=>e.jsx(T,{textValue:`${a.name.trim().length?a.name:a.firstName?`${a.firstName} ${a.lastName}`:a.email?a.email:`${a.countryCode}-${a.phone}`}`,children:e.jsx("div",{className:"flex gap-2 items-center",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-small",children:`${a.name.trim().length?a.name:a.firstName?`${a.firstName} ${a.lastName}`:a.email?a.email:`${a.countryCode}-${a.phone}`}`}),e.jsx("span",{className:"text-tiny text-default-400",children:a.email?a.email:`${a.countryCode}-${a.phone}`})]})})},a.id);return e.jsx(y,{headerLabel:"Transactions",headerDescription:"Update and explore transactions.",headerBtnLabel:"Add Transaction",api:"/api/transaction/list",queryKey:["transaction"],crudApi:"/api/transaction/",formHeader:"Add Transaction",tableColumns:$,defaultSortDescriptor:{column:"date",direction:"descending"},columnRenderers:{type:a=>a[0].toUpperCase()+a.substring(1),category:(a,p)=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"text-bold text-small capitalize",children:a==null?void 0:a.name}),e.jsx("p",{className:"text-bold text-tiny text-default-400",children:j(p)})]}),date:a=>C.fromISO(a).toFormat("DD, t a"),amount:a=>`${s==null?void 0:s.symbol}${a}`},tableRowClassName:a=>`border-b-medium ${a.type==="debit"?"bg-danger-50":"bg-success-50"}`,formFields:f(d??[],c),formValidationSchema:b,onSubmitSuccess:()=>{n()},onDeleteSuccess:()=>{n()},beforeTableComponent:e.jsxs("div",{className:"my-5 flex gap-4 items-center",children:[e.jsx(o,{label:"Total Earnings",body:`${s==null?void 0:s.symbol}${((r=t==null?void 0:t.data)==null?void 0:r.totalCredit._sum.amount)??0}`,bodyClassName:"text-success"}),e.jsx("h4",{className:"font-bold text-large",children:"-"}),e.jsx(o,{label:"Total Expenses",body:`${s==null?void 0:s.symbol}${((l=t==null?void 0:t.data)==null?void 0:l.totalDebit._sum.amount)??0}`,bodyClassName:"text-danger"}),e.jsx("h4",{className:"font-bold text-large",children:"="}),e.jsx(o,{label:"Current Balance",body:`${s==null?void 0:s.symbol}${(((i=t==null?void 0:t.data)==null?void 0:i.totalCredit._sum.amount)||0)-(((m=t==null?void 0:t.data)==null?void 0:m.totalDebit._sum.amount)||0)}`})]})})};export{V as default};
