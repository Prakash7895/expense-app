import{r as u,j as o,a9 as w,L as D,B as f}from"./index-O9JJZrcZ.js";import{D as B}from"./DynamicForm-T-cbPcn0.js";import{o as i,q as L}from"./validations-w-brqqe0.js";import{a as h}from"./axiosInstance-PK0LAldn.js";import{e as P}from"./index-3bZUMnvO.js";import"./Input-Q0zpkvv3.js";import"./constants-lrUcu3Dc.js";import"./Combination-wQBSQ2xP.js";const A=()=>{const[n,x]=u.useState(!1),[d,O]=u.useState(!1),[y,r]=u.useState(!1),t=e=>o.jsx("div",{children:o.jsx("p",{className:"text-default cursor-pointer",onClick:()=>{var g;h.post("/api/user/resend-otp",{emailOrPhone:e==null?void 0:e.emailOrPhone,countryCode:(g=e==null?void 0:e.countryCode)==null?void 0:g.value}).then(l=>{var m;f.success((m=l.data)==null?void 0:m.message)}).catch(l=>{P(l)})},children:"Resend OTP"})}),[b,c]=u.useState([i(t)[0]]),F=(e,g,l)=>{var m,j,C;r(!0),n?d?h.post("/api/user/reset-password",{emailOrPhone:e==null?void 0:e.emailOrPhone,countryCode:(C=e==null?void 0:e.countryCode)==null?void 0:C.value,otp:e==null?void 0:e.otp,password:e==null?void 0:e.password}).then(s=>{var a;l(),f.success((a=s.data)==null?void 0:a.message),r(!1),O(!1),x(!1),c([i(t)[0]])}).catch(s=>{P(s),r(!1)}):h.post("/api/user/verify-otp",{emailOrPhone:e==null?void 0:e.emailOrPhone,countryCode:(j=e==null?void 0:e.countryCode)==null?void 0:j.value,otp:e==null?void 0:e.otp}).then(s=>{var a;f.success((a=s.data)==null?void 0:a.message),c(i(t).map(p=>({...p,isDisabled:["emailOrPhone","otp"].includes(p.name)}))),O(!0),r(!1)}).catch(s=>{P(s),r(!1)}):h.post("/api/user/get-otp",{emailOrPhone:e==null?void 0:e.emailOrPhone,countryCode:(m=e==null?void 0:e.countryCode)==null?void 0:m.value}).then(s=>{var a;f.success((a=s.data)==null?void 0:a.message),c(i(t).slice(0,2).map(p=>({...p,isDisabled:p.name==="emailOrPhone"}))),x(!0),r(!1)}).catch(s=>{P(s),r(!1)})},S=()=>{d?(c(i(t).slice(0,2).map(e=>({...e,isDisabled:e.name==="emailOrPhone"}))),O(!1)):n&&(c([i(t)[0]]),x(!1))};return o.jsx("div",{className:"h-screen -mb-6 flex justify-center items-center",children:o.jsx(B,{hideCloseButton:!0,fields:b,onSubmit:F,validationSchema:L(n,d),submitButtonProps:{isLoading:y,isDisabled:y},formHeader:o.jsxs("div",{className:"justify-center pl-4",children:[n&&o.jsx(w,{className:"absolute left-4 cursor-pointer",onClick:S}),"Forgot Password"]}),submitButtonLabel:n?d?"Reset Password":"Verify OTP":"Get OTP",otherFooterElements:o.jsx(o.Fragment,{children:o.jsxs("p",{children:["Go to"," ",o.jsx(D,{to:"/login",className:"text-primary-500",children:"Login"})," ","page"]})}),buttonWrapperClassName:"justify-center items-center flex-col gap-3"})})};export{A as default};
