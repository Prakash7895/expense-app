import{r as o,j as a,Z as v,E as f}from"./index-2e-nGteb.js";import{S as b,l as C,D as y,s as N,q as S}from"./DynamicForm--ABcZsjd.js";import{i as w}from"./axiosInstance-Il8iOTPN.js";import{c as F,a as E,i as L}from"./constants-98K82Bco.js";const I=()=>{const[i,n]=o.useState(!1),[c,g]=o.useState(!1),[l,h]=o.useState("IN"),u=F.map(s=>{const e=E.find(r=>r.code===s);return{value:e==null?void 0:e.countryCode,Flag:L[s],label:e==null?void 0:e.name,field:e==null?void 0:e.code}}).filter(s=>!!s.value).sort((s,e)=>s.label<e.label?-1:1),t=u.find(s=>s.field===l),p=s=>{n(!0),w.post("/api/user/register",{...s,countryCode:t==null?void 0:t.value}).then(e=>{console.log("RES2:",e),f.success("Registration successfull."),n(!1)}).catch(e=>{var r,m,d;console.log("ERR",e),f.error(a.jsx("div",{children:(d=(m=(r=e==null?void 0:e.response)==null?void 0:r.data)==null?void 0:m.errors)==null?void 0:d.map(x=>a.jsx("p",{children:x.msg},x.msg))})),n(!1)})},j=a.jsx(a.Fragment,{children:c&&a.jsx("div",{className:"relative w-full max-w-36 h-full",children:a.jsx(b,{label:"Country Code",variant:"bordered",size:"sm",className:"absolute -top-[6px] -left-3.5",classNames:{popoverContent:"!w-[250px]",value:"w-0",trigger:"border-0 border-r-2"},items:u,onChange:s=>{console.log("change",s.target.value),h(s.target.value)},selectedKeys:l?[l]:[],startContent:l?a.jsxs("div",{className:"w-full flex items-center truncate",children:[t==null?void 0:t.Flag({className:"h-4 shrink-0"}),a.jsx("p",{children:t==null?void 0:t.value})]}):null,children:s=>{const e=s.Flag;return a.jsxs(C,{textValue:s.value,classNames:{title:"flex items-center justify-start gap-3"},children:[a.jsx(e,{className:"h-6 shrink-0"}),a.jsxs("div",{className:"flex-1 flex flex-wrap flex-col text-wrap",children:[a.jsx("p",{className:"text-default-700",children:s.label}),a.jsx("p",{children:s.value})]})]},s.field)}})})});return a.jsx("div",{className:"h-screen -mb-6 flex justify-center items-center",children:a.jsx(y,{hideCloseButton:!0,formClassName:"lg:w-1/4 md:w-1/3 sm:w-1/2 w-full m-10",fields:N(c,g,j),onSubmit:p,validationSchema:S,formHeader:"Sign up",submitButtonLabel:"Sign up",submitButtonProps:{isLoading:i,isDisabled:i},otherFooterElements:a.jsx(a.Fragment,{children:a.jsxs("p",{children:["Already have an account?"," ",a.jsx(v,{to:"/login",className:"text-primary-500",children:"Login"})]})}),buttonWrapperClassName:"justify-center items-center flex-col gap-3"})})};export{I as default};
