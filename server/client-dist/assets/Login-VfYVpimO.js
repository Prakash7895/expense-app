import{r as d,O as j,J as b,j as e,_ as u,K as v,B as f}from"./index-w6je0k0F.js";import{D as y}from"./DynamicForm-Ck6nf3Gv.js";import{m as L,o as N}from"./validations-lNAwhCIf.js";import{b as g,a as k}from"./axiosInstance-PK0LAldn.js";import"./Input-fvm86wpn.js";import"./import-BzfnQm3V.js";import"./Combination-KCCvlF8G.js";const I=()=>{const[o,a]=d.useState(!1),i=j(),x=b();d.useEffect(()=>{g.get("access-token")&&i("/")},[]);const h=n=>{a(!0),k.post("/api/user/login",{...n}).then(s=>{var t;g.set("access-token",s.data.token),x(v((t=s.data)==null?void 0:t.user)),f.success("Login successfull."),a(!1),i("/")}).catch(s=>{var t,c,m,r,p;f.error(e.jsx("div",{children:((m=(c=(t=s==null?void 0:s.response)==null?void 0:t.data)==null?void 0:c.errors)==null?void 0:m.map(l=>e.jsx("p",{children:l.msg},l.msg)))??((p=(r=s==null?void 0:s.response)==null?void 0:r.data)==null?void 0:p.message)??(s==null?void 0:s.message)??"Error"})),a(!1)})};return e.jsx("div",{className:"h-screen -mb-6 flex justify-center items-center",children:e.jsx(y,{hideCloseButton:!0,formHeader:"Login",onSubmit:h,fields:L,submitButtonLabel:"Sign In",validationSchema:N,fieldsWrapperClassName:"gap-0",submitButtonProps:{isLoading:o,isDisabled:o},otherFormBodyElements:e.jsxs("div",{className:"flex justify-between",children:[e.jsx(u,{to:"/signup",className:"text-primary-500",children:"Sign Up"}),e.jsx(u,{to:"/forgot-password",className:"text-secondary-600",children:"Forgot Password?"})]}),buttonWrapperClassName:"justify-start items-center flex-row-reverse gap-3"})})};export{I as default};
