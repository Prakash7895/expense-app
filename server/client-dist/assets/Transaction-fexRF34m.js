import{u as b,a as h,j as e}from"./index-ymt4ANV3.js";import{a as $,b as g}from"./validations-EuJt3hbt.js";import{a as y}from"./axiosInstance-PK0LAldn.js";import{t as C}from"./columnFields-cl43BhCr.js";import{u as N}from"./Combination-SEgVTcLS.js";import{C as j}from"./CrudComponent-VRehG6-G.js";import{T as n}from"./TransactionCard-8kLSCMiR.js";import{D as T}from"./datetime-yb3bjE9z.js";import{u as D}from"./useCurrency-l2nXD9lm.js";import{g as S}from"./index-IR7722iw.js";import{l as _}from"./Input-cGBWP1R9.js";import"./constants-Z2bI-2hX.js";import"./DropdownMenu-CwJgj6PW.js";import"./chunk-CIZQCQPA-d8rfu6rI.js";import"./DynamicForm-f4og165E.js";import"./chunk-RFUEKIFS-kjMkjToG.js";import"./Modal-STHToa6U.js";const k=()=>{var l,i,m,d;const x=b(h),s=D(),{data:t,refetch:r}=N({queryKey:["balance-info"],queryFn:async()=>y.get("/api/transaction/balance-info").then(a=>a.data),refetchOnWindowFocus:!1}),f=a=>{var o,c,p,u;return e.jsx(_,{textValue:`${(c=(o=a.name)==null?void 0:o.trim())!=null&&c.length?a.name:a.firstName?`${a.firstName} ${a.lastName}`:a.email?a.email:`${a.countryCode}-${a.phone}`}`,children:e.jsx("div",{className:"flex gap-2 items-center",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-small",children:`${(u=(p=a.name)==null?void 0:p.trim())!=null&&u.length?a.name:a.firstName?`${a.firstName} ${a.lastName}`:a.email?a.email:`${a.countryCode}-${a.phone}`}`}),e.jsx("span",{className:"text-tiny text-default-400",children:a.email?a.email:`${a.countryCode}-${a.phone}`})]})})},a.id)};return e.jsx(j,{headerLabel:"Transactions",headerDescription:"Update and explore transactions.",headerBtnLabel:"Add Transaction",api:"/api/transaction/list",queryKey:["transaction"],crudApi:"/api/transaction/",formHeader:"Add Transaction",tableColumns:C,defaultSortDescriptor:{column:"date",direction:"descending"},columnRenderers:{type:a=>a[0].toUpperCase()+a.substring(1),category:(a,o)=>e.jsxs("div",{className:"flex flex-col",children:[e.jsx("p",{className:"text-bold text-small capitalize",children:a==null?void 0:a.name}),e.jsx("p",{className:"text-bold text-tiny text-default-400",children:S(o)})]}),date:a=>T.fromISO(a).toFormat("DD, t a"),amount:a=>`${s==null?void 0:s.symbol}${a}`},tableRowClassName:a=>`border-b-medium ${a.type==="debit"?"bg-danger-50":"bg-success-50"}`,formFields:$(x??[],f),formValidationSchema:g,onSubmitSuccess:()=>{r()},onDeleteSuccess:()=>{r()},beforeTableComponent:e.jsxs("div",{className:"my-5 flex gap-4 items-center",children:[e.jsx(n,{label:"Total Earnings",body:`${s==null?void 0:s.symbol}${((l=t==null?void 0:t.data)==null?void 0:l.totalCredit._sum.amount)??0}`,bodyClassName:"text-success"}),e.jsx("h4",{className:"font-bold text-large",children:"-"}),e.jsx(n,{label:"Total Expenses",body:`${s==null?void 0:s.symbol}${((i=t==null?void 0:t.data)==null?void 0:i.totalDebit._sum.amount)??0}`,bodyClassName:"text-danger"}),e.jsx("h4",{className:"font-bold text-large",children:"="}),e.jsx(n,{label:"Current Balance",body:`${s==null?void 0:s.symbol}${(((m=t==null?void 0:t.data)==null?void 0:m.totalCredit._sum.amount)||0)-(((d=t==null?void 0:t.data)==null?void 0:d.totalDebit._sum.amount)||0)}`})]})})};export{k as default};
